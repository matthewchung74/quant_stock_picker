# Quantitative Stock Analysis Agent

A financial analysis tool that uses specialized AI agents and real-time market data to perform comprehensive analysis of stocks for trading strategy development, supporting both long and short positions.

## Overview

This application uses a multi-agent architecture powered by DeepSeek AI, combined with Alpaca Markets financial data APIs. Each aspect of stock analysis is handled by a dedicated specialized agent:

1. üìà **Market Data Agent** - Retrieves and analyzes current financial data, including:
   - Real-time price data and recent price changes
   - Technical indicators (RSI, SMA-50, SMA-200, VWAP)
   - Support and resistance levels
   - Volume analysis and patterns
   - Short interest and borrowing metrics

2. üì∞ **Sentiment Analysis Agent** - Evaluates market sentiment through:
   - Recent news articles and their impact (using DuckDuckGo with Tavily fallback)
   - Social media sentiment trends
   - Analyst ratings and price targets
   - Institutional investor positioning
   - Short seller activity and bearish sentiment

3. üåê **Macro-Economic Analysis Agent** - Assesses the broader economic context:
   - Economic indicators impact (interest rates, inflation, etc.)
   - Geopolitical factors and their market implications
   - Industry trends and sector rotation
   - Short-specific macroeconomic factors
   - Key risks and opportunities in the current environment

4. üìä **Strategy Development Agent** - Creates comprehensive trading strategies:
   - Long positions (buying with expectation of price increase)
   - Short positions (selling borrowed shares with expectation of price decrease)
   - Specific entry points, stop-loss levels, and profit targets for both strategies
   - Position-specific metrics (borrowing costs for shorts, etc.)

## Agent Architecture

Each specialized agent is designed to focus on a specific domain of financial analysis:

- **Market Data Agent**: Focuses on technical analysis, chart patterns, and short interest metrics
- **Sentiment Agent**: Specializes in analyzing news, social media, market sentiment (both bullish and bearish)
- **Macro Agent**: Provides economic context and industry analysis relevant to both long and short positions
- **Strategy Agent**: Develops actionable trading plans for both long and short strategies
- **Position Analyzer**: Manages existing positions, with specific logic for both long and short positions
- **Risk Agent**: Ensures proper risk management and position sizing for all position types

The agents work together in a coordinated workflow, with each agent's output feeding into the next stage of analysis, culminating in comprehensive trading strategies for both long and short positions.

## Technical Stack

- **Python 3.12+**: Core programming language
- **Pydantic & Pydantic-AI**: For data modeling and AI agent framework
- **DeepSeek AI Models**: For intelligent analysis and strategy generation
- **Alpaca Markets API**: For historical market data and trade execution
- **Lumibot**: For automated trading strategy implementation
- **Polygon.io API**: For real-time market data
- **Logging**: Comprehensive logging system with component-specific loggers

## Who This Is For

This tool is designed for:
- Educational purposes for learning about quantitative finance
- Understanding AI agent architectures in financial applications
- Exploring multi-perspective stock analysis methodologies for both long and short strategies

**IMPORTANT DISCLAIMER**: This software is provided for EDUCATIONAL PURPOSES ONLY. It is not financial advice and should not be used to make real investment decisions. The strategies and analyses generated by this tool are experimental and have not been validated for real-world trading. Always consult with a licensed financial advisor before making investment decisions.

## Setup

1. Ensure you have Python 3.12+ installed
2. Clone this repository
3. Create a virtual environment and activate it:
   ```
   uv venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```
4. Install the required dependencies:
   ```
   uv pip install -r requirements.txt
   ```
5. Create a `.env` file in the project root with your API keys:
   ```
   cp env.example .env
   ```
   Then edit the `.env` file to add your actual API keys.

## Required API Keys

- **DEEPSEEK_API_KEY** (required): For the DeepSeek AI model
- **ALPACA_API_KEY** and **ALPACA_API_SECRET**: For market data access
- **ALPACA_API_KEY_AGENT** and **ALPACA_API_SECRET_AGENT**: For trading execution
- **ALPACA_PAPER_TRADING**: Set to "true" to use paper trading (recommended)
- **TAVILY_API_KEY** (optional): For enhanced news search when DuckDuckGo has rate limits or fails

## Usage

Run the application from the command line:
```bash
python lumibot_agent.py
```

The application will:
1. Screen for potential trade candidates (both long and short)
2. Analyze each candidate using the specialized AI agents
3. Generate comprehensive trading strategies
4. Execute trades according to risk management rules

For backtesting, set the environment variable:
```
BACKTEST=true python lumibot_agent.py
```

After analysis completes, you will have a CSV file in the output directory that looks like:
```
Ticker,Current Price,Position Type,Expiration Date,Entry Price,Stop Loss Price,Profit Target,Risk/Reward,Summary,...
AIG,$83.13,LONG,2025-03-18,$83.13,$82.00,$85.00,1:2,Day trading long strategy for AIG stock ..."
GME,$18.45,SHORT,2025-03-18,$18.45,$19.50,$16.00,1:2.5,Shorting GME based on technical breakdown..."
```

## Extending the Project

You can easily extend this project by:

- Adding more data sources (e.g., options data, insider trading)
- Creating a command-line interface to specify tickers at runtime
- Comparing multiple stocks simultaneously
- Storing analysis results in a database for historical comparison
- Building a web interface to visualize the results
- Implementing more sophisticated short-selling risk metrics

## License

MIT 
